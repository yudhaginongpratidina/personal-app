// --------------------------------------------------------------------------------
// dependencies
// --------------------------------------------------------------------------------
import cors from 'cors';
import express from "express";
import cookieParser from 'cookie-parser';

// --------------------------------------------------------------------------------
// dependencies - routes
// --------------------------------------------------------------------------------
import api from "@/routes/api.route";

// --------------------------------------------------------------------------------
// dependencies - custom middleware
// --------------------------------------------------------------------------------
import NotFoundMiddleware from '@/middlewares/NotFoundMiddleware';
import ErrorMiddleware from "@/middlewares/ErrorMiddleware";

// --------------------------------------------------------------------------------
// initialize express
// --------------------------------------------------------------------------------
const app = express();

// --------------------------------------------------------------------------------
// middlewares - app
// --------------------------------------------------------------------------------
app.use(cors());
app.use(express.json());
app.use(cookieParser());
app.use(express.urlencoded({ extended: true }));

// --------------------------------------------------------------------------------
// routes
// --------------------------------------------------------------------------------
app.use('/api', api);

// --------------------------------------------------------------------------------
// custom middleware
// --------------------------------------------------------------------------------
app.use(NotFoundMiddleware);
app.use(ErrorMiddleware);

// --------------------------------------------------------------------------------
// export default
// --------------------------------------------------------------------------------
export default app;